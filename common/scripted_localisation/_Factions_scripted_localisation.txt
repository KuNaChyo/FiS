defined_text = {
	name = GetActiveFactionName

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			always = yes
		}
		localization_key = "[This.GetActiveFactionNameOtherContext]"
	}
}

defined_text = {
	name = GetActiveFactionNameOtherContext

	text = {
		trigger = {
			check_variable = { faction_id = 1 }
		}
		localization_key = FACTION_BLUESHIRTS_SOCIETY
	}
	text = {
		trigger = {
			check_variable = { faction_id = 2 }
		}
		localization_key = FACTION_CENTRAL_CLUB_CLIQUE
	}
	text = {
		trigger = {
			check_variable = { faction_id = 3 }
		}
		localization_key = FACTION_WHAMPOA_CLIQUE
	}
	text = {
		trigger = {
			check_variable = { faction_id = 4 }
		}
		localization_key = FACTION_REORGANIZATION_CLIQUE
	}
	text = {
		trigger = {
			check_variable = { faction_id = 5 }
		}
		localization_key = FACTION_POLITICAL_SCIENCE_CLIQUE
	}
	text = {
		trigger = {
			check_variable = { faction_id = 6 }
		}
		localization_key = FACTION_KYOKOKU_ITCHI_NAIKAKU
	}
	text = {
		trigger = {
			check_variable = { faction_id = 7 }
		}
		localization_key = FACTION_KODOHA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 8 }
		}
		localization_key = FACTION_TOSEIHA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 9 }
		}
		localization_key = FACTION_KANTAI_HA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 10 }
		}
		localization_key = FACTION_JOYAKU_HA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 11 }
		}
		localization_key = FACTION_CHP
	}
	text = {
		trigger = {
			check_variable = { faction_id = 12 }
		}
		localization_key = FACTION_GERILIKCILER
	}
	text = {
		trigger = {
			check_variable = { faction_id = 13 }
		}
		localization_key = FACTION_SERIATCILAR
	}
	text = {
		trigger = {
			check_variable = { faction_id = 14 }
		}
		localization_key = FACTION_MANDA_VE_HIMAYECILER
	}
	text = {
		trigger = {
			check_variable = { faction_id = 15 }
		}
		localization_key = FACTION_TURK_ORDUSU
	}
	text = {
		trigger = {
			check_variable = { faction_id = 16 }
		}
		localization_key = FACTION_SA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 17 }
		}
		localization_key = FACTION_SS
	}
	text = {
		trigger = {
			check_variable = { faction_id = 18 }
		}
		localization_key = FACTION_REICHSWEHR
	}
	text = {
		trigger = {
			check_variable = { faction_id = 19 }
		}
		localization_key = FACTION_WEHRMACHT
	}
	text = {
		trigger = {
			check_variable = { faction_id = 20 }
		}
		localization_key = FACTION_HIZB_AL_MITHAQ
	}
	text = {
		trigger = {
			check_variable = { faction_id = 21 }
		}
		localization_key = FACTION_HIZB_AL_IKHAA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 22 }
		}
		localization_key = FACTION_AL_UQADAA_AL_ARBAA
	}
	text = {
		trigger = {
			check_variable = { faction_id = 23 }
		}
		localization_key = FACTION_JAMAAT_AL_AHALI
	}
	text = {
		trigger = {
			check_variable = { faction_id = 24 }
		}
		localization_key = FACTION_AL_QUWWAT_AL_MALAKIYYAH
	}
	text = {
		trigger = {
			check_variable = { faction_id = 25 }
		}
		localization_key = FACTION_PARTY_POLITICIAN
	}
	text = {
		trigger = {
			check_variable = { faction_id = 26 }
		}
		localization_key = FACTION_PARTY_BUREAUCRAT
	}
	text = {
		trigger = {
			check_variable = { faction_id = 27 }
		}
		localization_key = FACTION_COURT_NOBLE
	}
	text = {
		trigger = {
			check_variable = { faction_id = 28 }
		}
		localization_key = FACTION_KAKUSHIN_KANRYO
	}

	text = {
		trigger = {
			always = yes
		}
		localization_key = ""
	}
}

defined_text = {
	name = GetActiveFactionDesc

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			always = yes
		}
		localization_key = "[This.GetActiveFactionDescOtherContext]"
	}
}

defined_text = {
	name = GetActiveFactionDescOtherContext

	text = {
		trigger = {
			check_variable = { faction_id = 1 }
		}
		localization_key = FACTION_BLUESHIRTS_SOCIETY_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 2 }
		}
		localization_key = FACTION_CENTRAL_CLUB_CLIQUE_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 3 }
		}
		localization_key = FACTION_WHAMPOA_CLIQUE_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 4 }
		}
		localization_key = FACTION_REORGANIZATION_CLIQUE_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 5 }
		}
		localization_key = FACTION_POLITICAL_SCIENCE_CLIQUE_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 6 }
		}
		localization_key = FACTION_KYOKOKU_ITCHI_NAIKAKU_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 7 }
		}
		localization_key = FACTION_KODOHA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 8 }
		}
		localization_key = FACTION_TOSEIHA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 9 }
		}
		localization_key = FACTION_KANTAI_HA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 10 }
		}
		localization_key = FACTION_JOYAKU_HA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 11 }
		}
		localization_key = FACTION_CHP_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 12 }
		}
		localization_key = FACTION_GERILIKCILER_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 13 }
		}
		localization_key = FACTION_SERIATCILAR_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 14 }
		}
		localization_key = FACTION_MANDA_VE_HIMAYECILER_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 15 }
		}
		localization_key = FACTION_TURK_ORDUSU_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 16 }
		}
		localization_key = FACTION_SA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 17 }
		}
		localization_key = FACTION_SS_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 18 }
		}
		localization_key = FACTION_REICHSWEHR_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 19 }
		}
		localization_key = FACTION_WEHRMACHT_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 20 }
		}
		localization_key = FACTION_HIZB_AL_MITHAQ_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 21 }
		}
		localization_key = FACTION_HIZB_AL_IKHAA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 22 }
		}
		localization_key = FACTION_AL_UQADAA_AL_ARBAA_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 23 }
		}
		localization_key = FACTION_JAMAAT_AL_AHALI_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 24 }
		}
		localization_key = FACTION_AL_QUWWAT_AL_MALAKIYYAH_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 25 }
		}
		localization_key = FACTION_PARTY_POLITICIAN_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 26 }
		}
		localization_key = FACTION_PARTY_BUREAUCRAT_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 27 }
		}
		localization_key = FACTION_COURT_NOBLE_DESC
	}
	text = {
		trigger = {
			check_variable = { faction_id = 28 }
		}
		localization_key = FACTION_KAKUSHIN_KANRYO_DESC
	}

	text = {
		trigger = {
			always = yes
		}
		localization_key = ""
	}
}

defined_text = {
	name = GetActiveFactionLoyalty

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			always = yes
		}
		localization_key = "[This.GetActiveFactionLoyaltyOtherContext]"
	}
}

defined_text = {
	name = GetActiveFactionLoyaltyOtherContext

	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_loyalty = faction_loyalty_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			check_variable = { faction_loyalty > 66 }
		}
		localization_key = string_faction_loyalty_high
	}
	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_loyalty = faction_loyalty_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			check_variable = { faction_loyalty > 33 }
		}
		localization_key = string_faction_loyalty_medium
	}
	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_loyalty = faction_loyalty_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			always = yes
		}
		localization_key = string_faction_loyalty_low
	}
}

defined_text = {
	name = GetActiveFactionInfluence

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			always = yes
		}
		localization_key = "[This.GetActiveFactionInfluenceOtherContext]"
	}
}

defined_text = {
	name = GetActiveFactionInfluenceOtherContext

	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_influence = faction_influence_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			check_variable = { faction_influence > 66 }
		}
		localization_key = string_faction_influence_high
	}
	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_influence = faction_influence_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			check_variable = { faction_influence > 33 }
		}
		localization_key = string_faction_influence_medium
	}
	text = {
		trigger = {
			meta_trigger = {
				text = {
					set_temp_variable = { faction_influence = faction_influence_[FACTION] }
				}
				FACTION = "[?faction_id]"
			}
			always = yes
		}
		localization_key = string_faction_influence_low
	}
}

defined_text = {
	name = GetActiveFactionIcon

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			always = yes
		}
		localization_key = "[This.GetActiveFactionIconOtherContext]"
	}
}

defined_text = {
	name = GetActiveFactionIconOtherContext

	text = {
		trigger = {
			check_variable = { faction_id = 1 }
		}
		localization_key = "GFX_faction_CHI_blueshirts_society"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 2 }
		}
		localization_key = "GFX_faction_CHI_central_club_clique"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 3 }
		}
		localization_key = "GFX_faction_CHI_whampoa_clique"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 4 }
		}
		localization_key = "GFX_faction_CHI_reorganization_clique"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 5 }
		}
		localization_key = "GFX_faction_CHI_political_science_clique"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 6 }
		}
		localization_key = "GFX_faction_JAP_kyokoku_itchi_naikaku"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 7 }
		}
		localization_key = "GFX_faction_JAP_kodoha"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 8 }
		}
		localization_key = "GFX_faction_JAP_toseiha"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 9 }
		}
		localization_key = "GFX_faction_JAP_kantai_ha"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 10 }
		}
		localization_key = "GFX_faction_JAP_joyaku_ha"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 11 }
		}
		localization_key = "GFX_faction_TUR_chp"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 12 }
		}
		localization_key = "GFX_faction_TUR_gerilikciler"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 13 }
		}
		localization_key = "GFX_faction_TUR_seriatcilar"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 14 }
		}
		localization_key = "GFX_faction_TUR_manda_ve_himayeciler"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 15 }
		}
		localization_key = "GFX_faction_TUR_turk_ordusu"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 16 }
		}
		localization_key = "GFX_faction_GER_sa"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 17 }
		}
		localization_key = "GFX_faction_GER_ss"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 18 }
		}
		localization_key = "GFX_faction_GER_reichswehr"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 19 }
		}
		localization_key = "GFX_faction_GER_wehrmacht"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 20 }
		}
		localization_key = "GFX_faction_IRQ_hizb_al_mithaq"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 21 }
		}
		localization_key = "GFX_faction_IRQ_hizb_al_ikhaa"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 22 }
		}
		localization_key = "GFX_faction_IRQ_al_uqadaa_al_arbaa"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 23 }
		}
		localization_key = "GFX_faction_IRQ_jamaat_al_ahali"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 24 }
		}
		localization_key = "GFX_faction_IRQ_al_quwwat_al_malakiyyah"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 25 }
		}
		localization_key = "GFX_faction_JAP_party_politician"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 26 }
		}
		localization_key = "GFX_faction_JAP_party_bureaucrat"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 27 }
		}
		localization_key = "GFX_faction_JAP_court_noble"
	}
	text = {
		trigger = {
			check_variable = { faction_id = 28 }
		}
		localization_key = "GFX_faction_JAP_kakushin_kanryo"
	}

	text = {
		trigger = {
			always = yes
		}
		localization_key = "GFX_faction_unknown"
	}
}

defined_text = {
	name = GetActiveFactionWeeklyInfluenceChange

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			calculate_weekly_faction_influence_change = yes
			always = yes
		}
		localization_key = "[?weekly_faction_influence_change|2+=%%]"
	}
}

defined_text = {
	name = GetActiveFactionWeeklyLoyaltyChange

	text = {
		trigger = {
			set_temp_variable = { faction_id = v }
			calculate_weekly_faction_loyalty_change = yes
			always = yes
		}
		localization_key = "[?weekly_faction_loyalty_change|2+=%%]"
	}
}